const cardContainer=document.querySelector(".movie-card"),searchBtn=document.getElementById("searchBtn"),searchText=document.getElementById("searchText"),discoverUrl="https://api.themoviedb.org/3/discover/movie?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_watch_monetization_types=flatrate",searchUrl="https://api.themoviedb.org/3/search/movie?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&query=spiderman&page=1&include_adult=false";async function renderMovies(e){const a=await fetch(e),i=await a.json();console.log(i);i.results.map((e=>{cardContainer.innerHTML+=`<div class="card">\n   <div class="icons">\n     <i data-info="${e.id}" class="bi bi-info-circle-fill"></i>\n    <i class="bi bi-star"></i>\n </div>\n <img data-image="${e.id}"src="https://image.tmdb.org/t/p/w500${e.poster_path}"alt="">\n <p class="title">${e.original_title}</p>\n <p class="review">imdb Rating: ${e.vote_average}</p>\n </div>`}))}async function renderMini(e){const a=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US`),i=await a.json();cardContainer.innerHTML="",cardContainer.classList.toggle("hidden"),document.querySelector(".movie").innerHTML=`\n   <div class="movie-img-container">\n   <img class="backdrop" src="https://image.tmdb.org/t/p/original/${i.backdrop_path}" alt="">\n   <img class="movie-img\n    " src="https://image.tmdb.org/t/p/w500/${i.poster_path}" alt="">\n    </div>\n   <p class="movie-title">${i.original_title}</p>\n   <p class="movie-overview">${i.overview}</p>\n   <p class="movie-release">${i.release_date}</p>\n \n   <p class="movie-review">imdb Rating: ${i.vote_average.toFixed(2)}</p>\n `}async function renderSimilarMovies(e){const a=await fetch(`https://api.themoviedb.org/3/movie/${e}/recommendations?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&page=1`);await a.json()}renderMovies(discoverUrl),document.addEventListener("click",(e=>{"searchBtn"===e.target.id&&(document.querySelector(".movie").innerHTML="",document.querySelector(".movie").classList.toggle="hidden",cardContainer.innerHTML="",cardContainer.classList.toggle("hidden"),renderMovies(`https://api.themoviedb.org/3/search/movie?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&query=${searchText.value}&page=1&include_adult=false`)),e.target.dataset.info&&(renderMini(e.target.dataset.info),renderMovies(`https://api.themoviedb.org/3/movie/${e.target.dataset.info}/recommendations?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&page=1`)),e.target.dataset.image&&(renderMini(e.target.dataset.image),renderMovies(`https://api.themoviedb.org/3/movie/${e.target.dataset.image}/similar?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&page=1`))}));