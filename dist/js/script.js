import{renderMovies,renderMini}from"./utils.js";const cardContainer=document.querySelector(".movie-card"),searchBtn=document.getElementById("searchBtn"),searchText=document.getElementById("searchText"),discoverUrl="https://api.themoviedb.org/3/discover/movie?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_watch_monetization_types=flatrate",searchUrl="https://api.themoviedb.org/3/search/movie?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&query=spiderman&page=1&include_adult=false";let lib=[];JSON.parse(localStorage.getItem("id"))&&(lib=JSON.parse(localStorage.getItem("id"))),renderMovies(discoverUrl),document.addEventListener("click",(e=>{"searchBtn"===e.target.id&&(document.querySelector(".movie").innerHTML="",document.querySelector(".movie").classList.toggle="hidden",cardContainer.innerHTML="",cardContainer.classList.toggle("hidden"),renderMovies(`https://api.themoviedb.org/3/search/movie?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&query=${searchText.value}&page=1&include_adult=false`)),e.target.dataset.info&&(renderMini(e.target.dataset.info),renderMovies(`https://api.themoviedb.org/3/movie/${e.target.dataset.info}/recommendations?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&page=1`)),e.target.dataset.image&&(renderMini(e.target.dataset.image),renderMovies(`https://api.themoviedb.org/3/movie/${e.target.dataset.image}/similar?api_key=ba3d1895317548c2e4d01a7e948e60ae&language=en-US&page=1`)),"search-icon"===e.target.id&&(document.querySelector(".search-bar").style.display="block",document.getElementById("search-icon").style.display="none"),"backBtn"===e.target.id&&(document.querySelector(".movie").innerHTML="",document.querySelector(".movie").classList.toggle="hidden",renderMovies(discoverUrl)),e.target.dataset.favorite&&(lib.includes(e.target.dataset.favorite)?console.log("it does"):(lib.unshift(e.target.dataset.favorite),localStorage.setItem("id",JSON.stringify(lib)),console.log(lib))),"libBtn"===e.target.id&&(document.querySelector(".movie").innerHTML="",document.querySelector(".movie").classList.toggle="hidden",cardContainer.innerHTML="",cardContainer.classList.toggle("hidden"),document.getElementById("libBtn").style.display="none",console.log(JSON.parse(localStorage.getItem("id"))))}));